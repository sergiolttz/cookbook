{% extends '__base.html' %}
{% block content %}
    <h1>Bienvenido a CookBook</h1>

    <form method="get" action="{% url 'recipes-list' %}">
        <input type="text" name="q" placeholder="Buscar recetas...">
        <button type="submit">Buscar</button>
    </form>
    <a href="{% url 'recipes-list' %}">Todas las recetas</a>

    <h2>Recetas Rápidas (menos de 12 minutos)</h2>
    <div class="recipe-list">
        {% for recipe in quick_recipes %}
            <div class="recipe-card">
                <a href="{% url 'recipe-detail' pk=recipe.pk %}">
                    <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                    <h3>{{ recipe.title }}</h3>
                    <p>Tiempo: {{ recipe.time_required }}</p>
                </a>
            </div>
        {% empty %}
            <p>No hay recetas rápidas disponibles.</p>
        {% endfor %}
    </div>

    {% if has_more_quick_recipes %}
        <a href="{% url 'recipes-list' %}?quick=true">Ver más recetas rápidas</a>
    {% endif %}

    <h2>Recetas con Pocos Ingredientes</h2>
    <div class="recipe-list">
        {% for recipe in few_ingredients_recipes %}
            <div class="recipe-card">
                <a href="{% url 'recipe-detail' pk=recipe.pk %}">
                    <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                    <h3>{{ recipe.title }}</h3>
                    <p>Ingredientes: {{ recipe.recipeingredient_set.count }}</p>
                </a>
            </div>
        {% empty %}
            <p>No hay recetas con pocos ingredientes disponibles.</p>
        {% endfor %}
    </div>

    {% if has_more_few_ingredients_recipes %}
        <a href="{% url 'recipes-list' %}?few_ingredients=true">Ver más recetas con pocos ingredientes</a>
    {% endif %}

    <h2>Últimas Recetas</h2>
    <div class="recipe-list">
        {% for recipe in latest_recipes %}
            <div class="recipe-card">
                <a href="{% url 'recipe-detail' pk=recipe.pk %}">
                    <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                    <h3>{{ recipe.title }}</h3>
                </a>
            </div>
        {% empty %}
            <p>No hay recetas recientes disponibles.</p>
        {% endfor %}
    </div>

    <a href="{% url 'recipes-list' %}?sort=created_at">Ver todas las recetas</a>

    {% if request.user.is_authenticated %}
        <h2>Recetas Favoritas</h2>
        <div class="recipe-list">
            {% for recipe in favorite_recipes %}
                <div class="recipe-card">
                    <a href="{% url 'recipe-detail' pk=recipe.pk %}">
                        <img src="{{ recipe.image.url }}" alt="{{ recipe.title }}">
                        <h3>{{ recipe.title }}</h3>
                    </a>
                </div>
            {% empty %}
                <p>No tienes recetas favoritas.</p>
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}